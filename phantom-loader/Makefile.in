
srcdir = @srcdir@
builddir = @builddir@

RUSTC = @RUSTC@
RUSTFLAGS = @RUSTFLAGS@
CC = @CC@
CFLAGS = @CFLAGS@

INSTALL = @INSTALL@

RUST_TARGET_PATH = @RUST_TARGET_PATH@

prefix = @prefix@
includedir = @libdir@

bootdir = @bootdir@
kernel_libdir = @kernel_libdir@

rust_bin_prefix=@rust_bin_prefix@
rust_bin_suffix=@rust_bin_suffix@
rust_rlib_prefix=@rust_rlib_prefix@
rust_rlib_suffix=@rust_rlib_suffix@
rust_staticlib_prefix=@rust_staticlib_prefix@
rust_staticlib_suffix=@rust_staticlib_suffix@
rust_dylib_prefix=@rust_dylib_prefix@
rust_dylib_suffix=@rust_dylib_suffix@
rust_cdylib_prefix=@rust_cdylib_prefix@
rust_cdylib_suffix=@rust_cdylib_suffix@



phantom_panic_halt_DIR = ../phantom-panic-halt
phantom_panic_halt_FILE = $(_DIR)/$(rust_rlib_prefix)phantom_panic_halt$(rust_rlib_suffix)

phantom_fs_drivers_DIR = ../phantom-fs-drivers
phantom_fs_drivers_FILE = $(_DIR)/$(rust_rlib_prefix)phantom_fs_drivers$(rust_rlib_suffix)



all: stamp

Makefile: config.status
    ./config.status Makefile 
    
config.status: @srcdir@/configure
    ./config.status --recheck


$(rust_staticlib_prefix)phantom_loader$(rust_staticlib_suffix).d: $(foreach dep,,$($(dep)_DIR)/stamp)
    $(RUSTC) $(RUSTFLAGS) --crate-name phantom_loader --crate-type staticlib --extern "phantom_panic_halt=$(phantom_panic_halt_FILE)" --extern "phantom_fs_drivers=$(phantom_fs_drivers_FILE)"  --emit dep-info=$@ -o $(rust_staticlib_prefix)phantom_loader$(rust_staticlib_suffix)

include $(rust_staticlib_prefix)phantom_loader$(rust_staticlib_suffix).d

$(rust_staticlib_prefix)phantom_loader$(rust_staticlib_suffix): $(foreach dep,,$($(dep)_DIR)/stamp) Makefile 
    $(RUSTC) $(RUSTFLAGS) --crate-name phantom_loader --crate-type staticlib --extern "phantom_panic_halt=$(phantom_panic_halt_FILE)" --extern "phantom_fs_drivers=$(phantom_fs_drivers_FILE)"  --emit link=$@ -o $@
stamp: $(rust_staticlib_prefix)phantom_loader$(rust_staticlib_suffix)




asm.mk: config.status
    ./config.status asm.mk


include asm.mk


stamp: 
    touch stamp